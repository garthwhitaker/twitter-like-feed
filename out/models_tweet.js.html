<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: models/tweet.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: models/tweet.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
/**
 * @author: Garth Whitaker &lt;garth.whitaker@gmail.com>
 */

(function () {

    'use strict';

    const utils = require('./../utils/utils');
    const _ = require('lodash');

    /***
     * This private method fetches tweet information from file
     * @param {string} fileName - The name of file containing tweet information
     * @return {string} The tweet contents from file
     */

    var fetchTweets = (fileName) => {
        var tweets = utils.fetch(fileName);
        return tweets;
    }

    /**
     * Class representing tweets
     */

    class Tweet {

        /**
         * Create a tweet.
         * @param {string} user - The name of the user who made tweet
         * @param {string} message - The message of the tweet 
         * @param {number} position - The order of the tweet when it was retrieved 
         */

        constructor(user, message, position) {
            this.user = user;
            this.message = message;
            this.position = position;
        }

        /**
         * This methods runs through all the tweets and returns tweets for user
         * @param {Tweet[]} tweets - A list of tweets
         * @param {string} user - The name of a user
         * @return {Tweet[]} List of filtered tweets for user 
         */

        static getTweetsByUser(tweets, user) {
            var result = tweets.filter((tweet) => {
                return tweet.user === user;
            });

            return result;
        }

        /**
         * This method sorts tweets by position 
         * @param {Tweet[]} tweets - A list of tweets
         * @return {Tweet[]}  A list of tweets
         */

        static sortTweetsByPosition(tweets) {

            tweets.sort(function (a, b) {
                return a.position - b.position;
            });
        }

        /**
         * This method prints out tweets 
         * @param {string[]} users - A list of user names
         * @param {Relationship[]} relationships - A list of relationships
         * @param {Tweet[]} tweets - A list of twets
         */

        static printTweets(users, relationships, tweets) {

            users.forEach((user) => {

                var userTweets = Tweet.getTweetsByUser(tweets, user);
                var relationshipForFollowed = relationships.filter((relationship) => {
                    return relationship.follower == user;
                });
                if (relationshipForFollowed.length) {
                    relationshipForFollowed[0].followed.forEach((followedUser) => {

                        var followedUserTweets = Tweet.getTweetsByUser(tweets, followedUser);
                        userTweets = userTweets.concat(followedUserTweets);
                    })
                }

                this.sortTweetsByPosition(userTweets);

                var message = `${user}\n`;
                userTweets.forEach((tweet) => {
                    message += `\t@${tweet.user}: ${tweet.message}\n\n`;
                });

                console.log(message);

            });

        }


        /**
         * This method populates tweets 
         * @param {fileName} - The name of file containing tweet information
         * @return {Tweet[]} List of tweets
         */

        static populateTweets(fileName) {

            var tweetsFromFile = fetchTweets(fileName);

            var tweets = [];

            var filteredTweets = tweetsFromFile.split('\r\n').filter(Boolean);

            filteredTweets.forEach((info, index) => {

                var result = utils.extractTweet(info);
                if (result) {

                    var user = result[1];
                    var tweet = result[2];

                    tweets.push(new Tweet(user, tweet, index));
                }
            });

            return tweets;
        }
    }

    /**
    * Tweet
    * @module Tweet
    */

    module.exports = {
        Tweet
    };
})();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Logger.html">Logger</a></li><li><a href="module-Relationship.html">Relationship</a></li><li><a href="module-Tweet.html">Tweet</a></li><li><a href="module-utils.html">utils</a></li></ul><h3>Classes</h3><ul><li><a href="Relationship.html">Relationship</a></li><li><a href="Tweet.html">Tweet</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Fri Feb 10 2017 08:06:24 GMT+0200 (SAST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
